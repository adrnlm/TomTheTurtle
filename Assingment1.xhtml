<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1 Strict//EN"
	  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  	<head>
    		<title>Turtle Tom</title>
    			<script type='text/javascript' src='../x3dom/x3dom.js'> </script>
    		<style type="text/css">
      		body { background-color:grey; }
    		</style>
  	</head>

		<body>
    		<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="600px" height="600px">
      		<Scene>

							<!-- Axis -->
							<Shape DEF="Axes">
	  							<IndexedLineSet
									coordIndex="0 1 -1 0 2 -1 0 3 -1"
									colorPerVertex="true"
									colorIndex="0 0 -1 1 1 -1 2 2 -1">
	    								<Coordinate point="
											0 0 0
											.8 0 0
											0 .8 0
											0 0 .8
											"/>
	    								<Color color="
											1 0 0
											0 1 0
										 	0 0 1
											 "/>
	  							 </IndexedLineSet>
							</Shape>

							<!-- Glass Tank -->
							<Shape DEF='Tank'>
								<IndexedFaceSet
								solid='false'
								coordIndex='
								0 1 5 4 -1
								4 7 3 0 -1
								3 7 6 2 -1
								2 6 5 1 -1
								7 6 5 4 -1'>

								<Coordinate point='
								-5.1 5 -5.1
								5.1 5 -5.1
								5.1 5 5.1
								-5.1 5 5.1
								-5.1 -3.1 -5.1
								5.1 -3.1 -5.1
								5.1 -3.1 5.1
								-5.1 -3.1 5.1
								' />
								</IndexedFaceSet>

								<Appearance DEF='glass'>
									<Material
									transparency='.8'
									diffusecolor='1 1 1' />
								</Appearance>
								<Viewpoint position='0 0 20'/>
							</Shape>

							<!-- Water -->
							<Shape DEF="Water">
								<IndexedFaceSet
								solid='false'
								coordIndex='
								0 1 2 3 -1
								0 1 5 4 -1
								4 7 3 0 -1
								3 7 6 2 -1
								2 6 5 1 -1
								7 6 5 4 -1'>

								<Coordinate point='
								-5 0 -5
								5 0 -5
								5 0 5
								-5 0 5
								-5 -3 -5
								5 -3 -5
								5 -3 5
								-5 -3 5
								' />
								</IndexedFaceSet>

								<Appearance DEF='WaterColor'>
									<Material
									transparency='0.5'
									diffusecolor='0 1 1' />
								</Appearance>
							</Shape>

							<!-- TURTLE -->
							<Transform DEF='Root'>
								<!-- BODY/ SHELL -->
								<Shape DEF="Dode">
									<IndexedFaceSet
									solid='false'
									coordIndex='
									0 1 2 -1
									2 3 0 -1
									3 4 0 -1
									4 5 0 -1
									5 6 0 -1
									6 1 0 -1
									1 2 7 -1
									2 3 7 -1
									3 4 7 -1
									4 5 7 -1
									5 6 7 -1
									6 1 7 -1
									'
									texCoordIndex='
									0 1 2 -1
									2 3 0 -1
									3 4 0 -1
									4 5 0 -1
									5 6 0 -1
									6 1 0 -1
									1 2 0 -1
									2 3 0 -1
									3 4 0 -1
									4 5 0 -1
									5 6 0 -1
									6 1 0 -1'>
										<Coordinate point='
										0 0.5 0
										.86 0 -.5
										0 0 -1
										-.86 0 -.5
										-.86 0 .5
										0 0 1
										.86 0 .5
										0 -0.5 0
										'/>
										<TextureCoordinate point='
										.5 .5
										1 .5
										.752 .934
										.251 .934
										0 .5
										.251 0.064
										.755 0.065'/>
									</IndexedFaceSet>

									<Appearance DEF='TurtleColor'>
										<Material
										diffusecolor='.9 .35 0.05' />
									</Appearance>
									<!-- ADDING TEXTURE -->
									<Appearance>
										<ImageTexture url='./shell-tex.png'/>
									</Appearance>
								</Shape>
								<!-- TOUCH SENSOR -->
								<TouchSensor DEF='activateAnimation'/>

								<!-- NECK -->
								<Transform DEF='NeckJoint'
								translation='.86 0 0'>
								<Shape USE='Axes'/>
									<Transform translation='.5 0 0'>
										<!-- HEAD -->
										<Shape DEF='Octa'>
											<IndexedFaceSet
											solid='false'
											coordIndex='
											0 1 2 3 4 1 0 -1
											5 1 2 3 4 1 5 -1
											'>
												<Coordinate point='
												0 .3 0
												.5 0 0
												0 0 .3
												-.5 0 0
												0 0 -.3
												0 -.3 0
												'/>
											</IndexedFaceSet>
											<Appearance USE='TurtleColor'/>
										</Shape>
											<!-- EYES -->
											<Transform scale='.1 .1 .1'>
												<Transform translation='2.3 .2 1.5'>
													<Shape DEF='Eye'>
														<Sphere/>
														<Appearance DEF="EyeColor">
															<Material diffusecolor='0 0 0'/>
														</Appearance>
													</Shape>
												</Transform>
												<Transform translation='2.3 .2 -1.5'>
													<Shape USE='Eye'/>
												</Transform>
											</Transform>
									</Transform>
								</Transform>

								<!-- TAIL -->
								<Transform rotation='0 1 0 3.14'>
									<Transform DEF='TailJoint' translation='.86 0 0'>
										<Shape USE='Axes'/>
										<Shape DEF='Tail'>
											<IndexedFaceSet
											solid='false'
											coordIndex='
											0 1 2 0 -1
											'>
												<Coordinate point='
												0 0 .3
												0 0 -.3
												.5 0 0
												'/>
											</IndexedFaceSet>
											<Appearance USE='TurtleColor'/>
										</Shape>
									</Transform>
								</Transform>

								<!-- FRONT LEFT HIP JOINT -->
								<Transform DEF='FLhip' rotation='0 1 0 1.04'>
									<Transform DEF='LHipJoint' translation='.86 0 0'>
										<Shape USE='Axes'/>
										<!-- UPPER LEG -->
										<Transform DEF='UpperLeg' translation='.5 0 0'>
											<Shape USE='Octa'/>
											<!-- KNEE JOINT -->
											<Transform DEF='KneeJoint' translation='.5 0 0'>
												<Transform rotation='0 0 1 5.49'>
													<Shape USE='Axes'/>
													<!-- LOWER LEG -->
													<Transform DEF='LowerLeg' translation='.5 0 0'>
														<Shape USE='Octa'/>
															<!-- ANKLE -->
															<Transform DEF='Ankle' translation='.5 0 0'>
																<Transform rotation='0 0 1 5.49'>
																	<Shape USE='Axes'/>
																		<!-- FOOT -->
																		<Transform DEF='Foot' translation='.5 0 0'>
																			<Shape USE='Octa'/>
																		</Transform>
																</Transform>
															</Transform>
													</Transform>
												</Transform>
											</Transform>
										</Transform>
									</Transform>
								</Transform>
								<!-- BACK LEFT HIP JOINT -->
								<Transform DEF='BLhip' rotation='0 1 0 2.09'>
									<Transform USE='LHipJoint'/>
								</Transform>
								<!-- BACK RIGHT HIP JOINT -->
								<Transform DEF='BRhip' rotation='0 1 0 4.18'>
									<Transform DEF='RHipJoint' translation='.86 0 0'>
										<Shape USE='Axes'/>
										<Transform USE='UpperLeg'/>
									</Transform>
								</Transform>
								<!-- FRONT RIGHTT HIP JOINT -->
								<Transform DEF='FRhip' rotation='0 1 0 5.23'>
									<Transform USE='RHipJoint'/>
								</Transform>

							</Transform>

							<!-- TIME SENSOR -->
							<TimeSensor DEF='Timer'
							cycleInterval='2'
							loop='true'
							enabled='false'/>

							<!-- ANIMATION BUTTON -->
							<ROUTE
							fromNode='activateAnimation'
							fromField='isActive'
							toNode='Timer'
							toField='enabled'/>

							<!-- HEAD ANIMATION -->
							<OrientationInterpolator DEF='bobHead'
							key='0 .5 1'
							keyValue='
							0 0 1 0,
							0 0 1 .43,
							0 0 1 0'/>
							<ROUTE
							fromNode='Timer'
							fromField='fraction_changed'
							toNode='bobHead'
							toField='set_fraction'/>
							<ROUTE
							fromNode='bobHead'
							fromField='value_changed'
							toNode='NeckJoint'
							toField='rotation'/>

							<!-- LEFT LIMB ANIMATION -->
							<OrientationInterpolator DEF='moveLeftHipJoint'
							key='0 .25 .5 .75 1'
							keyValue='
							0 1 0 0,
							0 1 0 5.75,
							0 1 0 0,
							0 1 0 .523,
							0 1 0 0'/>
							<ROUTE
							fromNode='Timer'
							fromField='fraction_changed'
							toNode='moveLeftHipJoint'
							toField='set_fraction'/>
							<ROUTE
							fromNode='moveLeftHipJoint'
							fromField='value_changed'
							toNode='LHipJoint'
							toField='rotation'/>

							<!-- RIGHT LIMB ANIMATION -->
							<OrientationInterpolator DEF='moveRightHipJoint'
							key='0 .25 .5 .75 1'
							keyValue='
							0 1 0 0,
							0 1 0 .523,
							0 1 0 0,
							0 1 0 5.75,
							0 1 0 0'/>
							<ROUTE
							fromNode='Timer'
							fromField='fraction_changed'
							toNode='moveRightHipJoint'
							toField='set_fraction'/>
							<ROUTE
							fromNode='moveRightHipJoint'
							fromField='value_changed'
							toNode='RHipJoint'
							toField='rotation'/>

							<!-- TAIL ANIMATION -->
							<OrientationInterpolator DEF='bobTail'
							key='0 .5 1'
							keyValue='
							0 0 1 0,
							0 0 1 5.75,
							0 0 1 0'/>
							<ROUTE
							fromNode='Timer'
							fromField='fraction_changed'
							toNode='bobTail'
							toField='set_fraction'/>
							<ROUTE
							fromNode='bobTail'
							fromField='value_changed'
							toNode='TailJoint'
							toField='rotation'/>

      		</Scene>
    		</X3D>
  </body>
</html>
